{"version":3,"sources":["webpack:///static/js/app.a63154b98f2cdd4843fb.js","webpack:///./src/App.vue","webpack:///./src/components/Treemap.vue","webpack:///src/App.vue","webpack:///./src/App.vue?65fd","webpack:///src/components/Treemap.vue","webpack:///./src/components/Treemap.vue?35d6","webpack:///./src/router/index.js","webpack:///./src/main.js"],"names":["webpackJsonp","JBdj","module","exports","NHnr","__webpack_exports__","__webpack_require__","injectStyle","ssrContext","Object","defineProperty","value","vue_esm","name","render","_vm","this","_h","$createElement","_c","_self","attrs","staticRenderFns","esExports","normalizeComponent","__vue_styles__","Component","vue_router_esm","d3_scale","d3_request","d3_hierarchy","scaleLinear","scaleOrdinal","schemeCategory20","json","hierarchy","treemap","data","jsonData","rootNode","margin","top","right","bottom","left","width","height","selected","color","watch","selectedNode","console","log","mounted","that","d3","computed","parentId","undefined","parent","id","x","y","node","nd","_children","domain","x0","x1","y0","y1","methods","initialize","b","a","depth","accumulate","d","children","reduce","p","v","getNodeById","i","length","context","selectNode","event","target","staticClass","staticStyle","_l","index","key","child","_v","style","fill","on","_s","_e","Vue","use","Router","routes","path","component","Treemap","config","productionTip","el","router","template","components","App","dxVl"],"mappings":"AAAAA,cAAc,IAERC,KACA,SAAUC,EAAQC,KAMlBC,KACA,SAAUF,EAAQG,EAAqBC,GAE7C,YCZA,SAASC,GAAaC,GACpB,EAAQ,QCDV,QAAS,GAAaA,GACpB,EAAQ,QFYVC,OAAOC,eAAeL,EAAqB,cAAgBM,OAAO,GAGlE,IAAIC,GAAUN,EAAoB,QGTlC,GACEO,KAAM,OCRJC,EAAS,WAAa,GAAIC,GAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,CAAG,OAAOE,GAAG,OAAOE,OAAO,GAAK,SAASF,EAAG,gBAAgB,IAC9IG,KACAC,GAAcT,OAAQA,EAAQQ,gBAAiBA,GACpC,IHAXE,EAAqB,EAAQ,QAS7BC,EAAiBlB,EAKjBmB,EAAYF,EACd,EACA,GATgC,EAWhCC,EAPoB,KAEU,MAUjB,EAAAC,EAAiB,QDsC5BC,EAAiBrB,EAAoB,QAGrCsB,EAAWtB,EAAoB,QAG/BuB,EAAavB,EAAoB,QAGjCwB,EAAexB,EAAoB,QKiCvC,GACEyB,YAAa,EAAf,EACEC,aAAc,EAAhB,EACEC,iBAAkB,EAApB,EACEC,KAAM,EAAR,EACEC,UAAW,EAAb,EACEC,QAAS,EAAX,GAGA,GACEvB,KAAM,UAENwB,KAHF,WAII,OACEC,SAAU,KACVC,YACAC,QACEC,IAAK,GACLC,MAAO,EACPC,OAAQ,EACRC,KAAM,GAERC,MAAO,IACPC,OAAQ,IACRC,SAAU,KACVC,WAIJC,OACEC,aADJ,SACA,KACMC,QAAQC,IAAI,kCAIhBC,QA1BF,WA2BI,GAAIC,GAAOtC,IAGXsC,GAAKN,MAAQO,EAAGvB,aAAauB,EAAGtB,kBAGhCsB,EAAGrB,KAAK,qBACZ,cACA,kBACM,EAAN,WACM,EAAN,aACM,EAAN,yBACM,EAAN,uBAKEsB,UAEEC,SAFJ,WAGM,WAAiCC,KAA7B1C,KAAKkC,aAAaS,QAAqD,OAA7B3C,KAAKkC,aAAaS,OACvD3C,KAAKkC,aAAaU,GAElB5C,KAAKkC,aAAaS,OAAOC,IAKpCC,EAXJ,WAYM,MAAON,GAAGxB,cAChB,uBACA,uBAII+B,EAlBJ,WAmBM,MAAOP,GAAGxB,cAChB,2DACA,2DAGIK,QAxBJ,WAyBM,MAAOmB,GAAGnB,UAChB,+BACA,UACA,iBAGIc,aA/BJ,WAgCM,GAAN,OAEM,IAAIlC,KAAK+B,SAAU,CACjB,GAAR,qDAGUgB,GADEC,EAAGC,UACED,EAEAA,EAAGL,WAGZI,GAAO/C,KAAKuB,QAOd,OAHAvB,MAAK6C,EAAEK,QAAQH,EAAKI,GAAIJ,EAAKI,IAAMJ,EAAKK,GAAKL,EAAKI,MAClDnD,KAAK8C,EAAEI,QAAQH,EAAKM,GAAIN,EAAKM,IAAMN,EAAKO,GAAKP,EAAKM,MAE3CN,IAGXQ,SAEEC,WAFJ,WAGM,GAAN,OAEUlB,GAAKhB,WACPgB,EAAKf,SAAWgB,EAAGpB,UAAUmB,EAAKhB,UAC1C,wEACA,iCACA,mBACU,MAAOmC,GAAE3B,OAAS4B,EAAE5B,QAAU2B,EAAE9D,MAAQ+D,EAAE/D,QAE5C2C,EAAKf,SAASsB,EAAIP,EAAKf,SAASuB,EAAI,EACpCR,EAAKf,SAAS6B,GAAKd,EAAKT,MACxBS,EAAKf,SAAS+B,GAAKhB,EAAKR,OACxBQ,EAAKf,SAASoC,MAAQ,IAK1BC,WApBJ,SAoBA,KAGM,MAFAC,GAAEZ,UAAYY,EAAEC,SAEZD,EAAEZ,WACJY,EAAElE,MAAQkE,EAAEZ,UAAUc,OAAO,SAAUC,EAAGC,GAAlD,+BACeJ,EAAElE,OAEFkE,EAAElE,OAIbuE,YA/BJ,SA+BA,OACM,GAAInB,EAAKH,KAAOA,EACd,MAAOG,EACf,gBACQ,IAAK,GAAIoB,GAAI,EAAGA,EAAIpB,EAAKE,UAAUmB,OAAQD,IAAK,CAC9C,GAAInB,GAAKqB,EAAQH,YAAYnB,EAAKE,UAAUkB,GAAIvB,EAAIyB,EACpD,IAAIrB,EACF,MAAOA,KAQfsB,WA9CJ,SA8CA,GACMtE,KAAK+B,SAAWwC,EAAMC,OAAO5B,MCnQ/B,EAAS,WAAa,GAAI7C,GAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,CAAG,OAAOE,GAAG,OAAOsE,YAAY,YAAYtE,EAAG,OAAOuE,aAAa,cAAc,OAAOrE,OAAO,OAASN,EAAI+B,OAAO,MAAQ/B,EAAI8B,SAAS1B,EAAG,KAAKuE,aAAa,kBAAkB,cAAcrE,OAAO,UAAY,qBAAqBF,EAAG,oBAAoBsE,YAAY,QAAQpE,OAAO,KAAO,OAAO,IAAM,MAAMN,EAAI4E,GAAI5E,EAAImC,aAAsB,UAAE,SAAS4B,EAASc,GAAO,MAAQ7E,GAAgB,aAAEI,EAAG,KAAK0E,IAAI,KAAOf,EAASlB,GAAG6B,YAAY,aAAa1E,EAAI4E,GAAIb,EAAkB,UAAE,SAASgB,GAAO,MAAO3E,GAAG,QAAQ0E,IAAIC,EAAMlC,GAAG6B,YAAY,QAAQpE,OAAO,GAAKyE,EAAMlC,GAAG,OAAS7C,EAAI+C,EAAEgC,EAAMxB,IAAMvD,EAAI+C,EAAEgC,EAAMzB,IAAI,MAAQtD,EAAI8C,EAAEiC,EAAM1B,IAAMrD,EAAI8C,EAAEiC,EAAM3B,IAAI,EAAIpD,EAAI8C,EAAEiC,EAAM3B,IAAI,EAAIpD,EAAI+C,EAAEgC,EAAMzB,SAAStD,EAAIgF,GAAG,KAAK5E,EAAG,QAAQ0E,IAAIf,EAASlB,GAAG6B,YAAY,SAASO,OAASC,KAAMlF,EAAIiC,MAAM4C,IAAUvE,OAAO,GAAKyD,EAASlB,GAAG,EAAI7C,EAAI8C,EAAEiB,EAASX,IAAI,EAAIpD,EAAI+C,EAAEgB,EAAST,IAAI,MAAQtD,EAAI8C,EAAEiB,EAASV,GAAKU,EAASX,GAAKW,EAASnB,OAAOQ,IAAI,OAASpD,EAAI+C,EAAEgB,EAASR,GAAKQ,EAAST,GAAKS,EAASnB,OAAOU,KAAK6B,IAAI,MAAQnF,EAAIuE,cAAcnE,EAAG,SAASJ,EAAIgF,GAAGhF,EAAIoF,GAAGrB,EAASzC,KAAKxB,MAAM,MAAME,EAAIoF,GAAGrB,EAASnE,YAAYI,EAAIgF,GAAG,KAAK5E,EAAG,QAAQ0E,IAAI,KAAOf,EAASlB,GAAG8B,aAAa,eAAe,KAAKrE,OAAO,GAAK,MAAM,EAAIN,EAAI8C,EAAEiB,EAASX,IAAM,EAAE,EAAIpD,EAAI+C,EAAEgB,EAAST,IAAM,KAAKtD,EAAIgF,GAAG,iBAAiBhF,EAAIoF,GAAGrB,EAASzC,KAAKxB,MAAM,kBAAkBE,EAAIgF,GAAG,KAAK5E,EAAG,QAAQ0E,IAAI,KAAOf,EAASlB,GAAG8B,aAAa,eAAe,KAAKrE,OAAO,GAAK,SAAS,EAAIN,EAAI8C,EAAEiB,EAASX,IAAM,EAAE,EAAIpD,EAAI+C,EAAEgB,EAAST,IAAM,KAAKtD,EAAIgF,GAAG,mBAAmBhF,EAAIoF,GAAGrB,EAASnE,OAAO,mBAAmB,GAAGI,EAAIqF,OAAO,GAAGrF,EAAIgF,GAAG,KAAK5E,EAAG,KAAKsE,YAAY,gBAAgBtE,EAAG,QAAQE,OAAO,OAASN,EAAIyB,OAAOC,IAAI,MAAQ1B,EAAI8B,MAAM,GAAuB,EAAlB9B,EAAIyB,OAAOC,IAAU,GAAK1B,EAAI0C,UAAUyC,IAAI,MAAQnF,EAAIuE,cAAcvE,EAAIgF,GAAG,KAAK5E,EAAG,QAAQE,OAAO,GAAK,QAAQ,EAAI,IAAI,EAAI,SAASN,EAAIgF,GAAG,2BAA2BhF,EAAIoF,GAAGpF,EAAImC,aAAaU,IAAI,mBAAmB,QACl7D,KACA,GAAc9C,OAAQ,EAAQQ,gBAAiB,GACpC,IJAX,EAAqB,EAAQ,QAS7B,EAAiB,EAKjB,EAAY,EACd,EACA,GATgC,EAWhC,EAPoB,kBAEU,MAUjB,IAAiB,OKtBhC+E,KAAIC,IAAIC,IAEO,UAAIA,MACjBC,SAEIC,KAAM,IACN5F,KAAM,UACN6F,UAAWC,KCLjBN,KAAIO,OAAOC,eAAgB,EAG3B,GAAIR,MACFS,GAAI,OACJC,SACAC,SAAU,SACVC,YAAcC,UR4YVC,KACA,SAAUjH,EAAQC,OAMrB","file":"static/js/app.a63154b98f2cdd4843fb.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ \"JBdj\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"NHnr\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n// EXTERNAL MODULE: ./node_modules/vue/dist/vue.esm.js\nvar vue_esm = __webpack_require__(\"7+uW\");\n\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/App.vue\n//\n//\n//\n//\n//\n//\n\n/* harmony default export */ var App = ({\n  name: 'app'\n});\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-2dc34c13\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ var selectortype_template_index_0_src_App = (esExports);\n// CONCATENATED MODULE: ./src/App.vue\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"dxVl\")\n}\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  App,\n  selectortype_template_index_0_src_App,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ var src_App = (Component.exports);\n\n// EXTERNAL MODULE: ./node_modules/vue-router/dist/vue-router.esm.js\nvar vue_router_esm = __webpack_require__(\"/ocq\");\n\n// EXTERNAL MODULE: ./node_modules/d3-scale/index.js + 124 modules\nvar d3_scale = __webpack_require__(\"Q1TF\");\n\n// EXTERNAL MODULE: ./node_modules/d3-request/index.js + 15 modules\nvar d3_request = __webpack_require__(\"IT06\");\n\n// EXTERNAL MODULE: ./node_modules/d3-hierarchy/index.js + 30 modules\nvar d3_hierarchy = __webpack_require__(\"HRak\");\n\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/components/Treemap.vue\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n\n// To be explicit about which methods are from D3 let's wrap them around an object\n// Is there a better way to do this?\nvar d3 = {\n  scaleLinear: d3_scale[\"a\" /* scaleLinear */],\n  scaleOrdinal: d3_scale[\"b\" /* scaleOrdinal */],\n  schemeCategory20: d3_scale[\"c\" /* schemeCategory20 */],\n  json: d3_request[\"a\" /* json */],\n  hierarchy: d3_hierarchy[\"a\" /* hierarchy */],\n  treemap: d3_hierarchy[\"b\" /* treemap */]\n};\n\n/* harmony default export */ var Treemap = ({\n  name: 'Treemap',\n  // the component's data\n  data: function data() {\n    return {\n      jsonData: null,\n      rootNode: {},\n      margin: {\n        top: 20,\n        right: 0,\n        bottom: 0,\n        left: 0\n      },\n      width: 960,\n      height: 530,\n      selected: null,\n      color: {}\n    };\n  },\n\n  // You can do whatever when the selected node changes\n  watch: {\n    selectedNode: function selectedNode(newData, oldData) {\n      console.log('The selected node changed...');\n    }\n  },\n  // In the beginning...\n  mounted: function mounted() {\n    var that = this;\n\n    // An array with colors (can probably be replaced by a vuejs method)\n    that.color = d3.scaleOrdinal(d3.schemeCategory20);\n\n    // loads the data and calls the initialization methods\n    d3.json('../static/naf.json', function (error, data) {\n      if (error) console.log(error);\n      that.jsonData = data;\n      that.initialize();\n      that.accumulate(that.rootNode, that);\n      that.treemap(that.rootNode);\n    });\n  },\n\n  // The reactive computed variables that fire rerenders\n  computed: {\n    // The grandparent id\n    parentId: function parentId() {\n      if (this.selectedNode.parent === undefined || this.selectedNode.parent === null) {\n        return this.selectedNode.id;\n      } else {\n        return this.selectedNode.parent.id;\n      }\n    },\n\n    // Returns the x position within the current domain\n    // Maybe it can be replaced by a vuejs method\n    x: function x() {\n      return d3.scaleLinear().domain([0, this.width]).range([0, this.width]);\n    },\n\n    // Returns the y position within the current domain\n    // Maybe it can be replaced by a vuejs method\n    y: function y() {\n      return d3.scaleLinear().domain([0, this.height - this.margin.top - this.margin.bottom]).range([0, this.height - this.margin.top - this.margin.bottom]);\n    },\n\n    // The D3 function that recursively subdivides an area into rectangles\n    treemap: function treemap() {\n      return d3.treemap().size([this.width, this.height]).round(false).paddingInner(0);\n    },\n\n    // The current selected node\n    selectedNode: function selectedNode() {\n      var node = null;\n\n      if (this.selected) {\n        var nd = this.getNodeById(this.rootNode, this.selected, this);\n\n        if (nd._children) {\n          node = nd;\n        } else {\n          node = nd.parent;\n        }\n      } else {\n        node = this.rootNode;\n      }\n\n      // Recalculates the y and x domains\n      this.x.domain([node.x0, node.x0 + (node.x1 - node.x0)]);\n      this.y.domain([node.y0, node.y0 + (node.y1 - node.y0)]);\n\n      return node;\n    }\n  },\n  methods: {\n    // Called once, to create the hierarchical data representation\n    initialize: function initialize() {\n      var that = this;\n\n      if (that.jsonData) {\n        that.rootNode = d3.hierarchy(that.jsonData).eachBefore(function (d) {\n          d.id = (d.parent ? d.parent.id + '.' : '') + d.data.name;\n        }).sum(function (d) {\n          return d.value;\n        }).sort(function (a, b) {\n          return b.height - a.height || b.value - a.value;\n        });\n        that.rootNode.x = that.rootNode.y = 0;\n        that.rootNode.x1 = that.width;\n        that.rootNode.y1 = that.height;\n        that.rootNode.depth = 0;\n      }\n    },\n\n    // Calculates the accumulated value (sum of children values) of a node - its weight,\n    // represented afterwards in the area of its square\n    accumulate: function accumulate(d, context) {\n      d._children = d.children;\n\n      if (d._children) {\n        d.value = d._children.reduce(function (p, v) {\n          return p + context.accumulate(v, context);\n        }, 0);\n        return d.value;\n      } else {\n        return d.value;\n      }\n    },\n\n    // Helper method - gets a node by its id attribute\n    getNodeById: function getNodeById(node, id, context) {\n      if (node.id === id) {\n        return node;\n      } else if (node._children) {\n        for (var i = 0; i < node._children.length; i++) {\n          var nd = context.getNodeById(node._children[i], id, context);\n          if (nd) {\n            return nd;\n          }\n        }\n      }\n    },\n\n    // When a user clicks a square, changes the selected data attribute\n    // which fires the computed selectedNode, which in turn finds the Node by the id of the square clicked\n    // and the template reflects the changes\n    selectNode: function selectNode(event) {\n      this.selected = event.target.id;\n    }\n  }\n});\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-7f9468f2\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Treemap.vue\nvar Treemap_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"treemap\"},[_c('svg',{staticStyle:{\"margin-left\":\"0px\"},attrs:{\"height\":_vm.height,\"width\":_vm.width}},[_c('g',{staticStyle:{\"shape-rendering\":\"crispEdges\"},attrs:{\"transform\":\"translate(0,20)\"}},[_c('transition-group',{staticClass:\"depth\",attrs:{\"name\":\"list\",\"tag\":\"g\"}},_vm._l((_vm.selectedNode._children),function(children,index){return (_vm.selectedNode)?_c('g',{key:'c_' + children.id,staticClass:\"children\"},[_vm._l((children._children),function(child){return _c('rect',{key:child.id,staticClass:\"child\",attrs:{\"id\":child.id,\"height\":_vm.y(child.y1) - _vm.y(child.y0),\"width\":_vm.x(child.x1) - _vm.x(child.x0),\"x\":_vm.x(child.x0),\"y\":_vm.y(child.y0)}})}),_vm._v(\" \"),_c('rect',{key:children.id,staticClass:\"parent\",style:({ fill: _vm.color(index) }),attrs:{\"id\":children.id,\"x\":_vm.x(children.x0),\"y\":_vm.y(children.y0),\"width\":_vm.x(children.x1 - children.x0 + children.parent.x0),\"height\":_vm.y(children.y1 - children.y0 + children.parent.y0)},on:{\"click\":_vm.selectNode}},[_c('title',[_vm._v(_vm._s(children.data.name)+\" | \"+_vm._s(children.value))])]),_vm._v(\" \"),_c('text',{key:'t_' + children.id,staticStyle:{\"fill-opacity\":\"1\"},attrs:{\"dy\":\"1em\",\"x\":_vm.x(children.x0) + 6,\"y\":_vm.y(children.y0) + 6}},[_vm._v(\"\\n            \"+_vm._s(children.data.name)+\"\\n          \")]),_vm._v(\" \"),_c('text',{key:'t_' + children.id,staticStyle:{\"fill-opacity\":\"1\"},attrs:{\"dy\":\"2.25em\",\"x\":_vm.x(children.x0) + 6,\"y\":_vm.y(children.y0) + 6}},[_vm._v(\"\\n\\n            \"+_vm._s(children.value)+\"\\n          \")])],2):_vm._e()}),0),_vm._v(\" \"),_c('g',{staticClass:\"grandparent\"},[_c('rect',{attrs:{\"height\":_vm.margin.top,\"width\":_vm.width,\"y\":(_vm.margin.top * -1),\"id\":_vm.parentId},on:{\"click\":_vm.selectNode}}),_vm._v(\" \"),_c('text',{attrs:{\"dy\":\".65em\",\"x\":\"6\",\"y\":\"-14\"}},[_vm._v(\"\\n          \\n          \"+_vm._s(_vm.selectedNode.id)+\"\\n        \")])])],1)])])}\nvar Treemap_staticRenderFns = []\nvar Treemap_esExports = { render: Treemap_render, staticRenderFns: Treemap_staticRenderFns }\n/* harmony default export */ var components_Treemap = (Treemap_esExports);\n// CONCATENATED MODULE: ./src/components/Treemap.vue\nfunction Treemap_injectStyle (ssrContext) {\n  __webpack_require__(\"JBdj\")\n}\nvar Treemap_normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar Treemap___vue_template_functional__ = false\n/* styles */\nvar Treemap___vue_styles__ = Treemap_injectStyle\n/* scopeId */\nvar Treemap___vue_scopeId__ = \"data-v-7f9468f2\"\n/* moduleIdentifier (server only) */\nvar Treemap___vue_module_identifier__ = null\nvar Treemap_Component = Treemap_normalizeComponent(\n  Treemap,\n  components_Treemap,\n  Treemap___vue_template_functional__,\n  Treemap___vue_styles__,\n  Treemap___vue_scopeId__,\n  Treemap___vue_module_identifier__\n)\n\n/* harmony default export */ var src_components_Treemap = (Treemap_Component.exports);\n\n// CONCATENATED MODULE: ./src/router/index.js\n\n\n\n\nvue_esm[\"a\" /* default */].use(vue_router_esm[\"a\" /* default */]);\n\n/* harmony default export */ var router = (new vue_router_esm[\"a\" /* default */]({\n  routes: [{\n    path: '/',\n    name: 'Treemap',\n    component: src_components_Treemap\n  }]\n}));\n// CONCATENATED MODULE: ./src/main.js\n// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\n\n\n\n\nvue_esm[\"a\" /* default */].config.productionTip = false;\n\n/* eslint-disable no-new */\nnew vue_esm[\"a\" /* default */]({\n  el: '#app',\n  router: router,\n  template: '<App/>',\n  components: { App: src_App }\n});\n\n/***/ }),\n\n/***/ \"dxVl\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ })\n\n},[\"NHnr\"]);\n\n\n// WEBPACK FOOTER //\n// static/js/app.a63154b98f2cdd4843fb.js","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2dc34c13\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2dc34c13\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-7f9468f2\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Treemap.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Treemap.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Treemap.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7f9468f2\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Treemap.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-7f9468f2\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Treemap.vue\n// module id = null\n// module chunks = ","<template>\n  <div id=\"app\">\n    <router-view/>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'app'\n}\n</script>\n\n<style>\n#app {\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin-top: 60px;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-2dc34c13\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","<template>\n  <div class=\"treemap\">\n    <!-- The SVG structure is explicitly defined in the template with attributes derived from component data -->\n    <svg :height=\"height\" style=\"margin-left: 0px;\" :width=\"width\">\n      <g style=\"shape-rendering: crispEdges;\" transform=\"translate(0,20)\">\n        <!-- We can use Vue transitions too! -->\n        <transition-group name=\"list\" tag=\"g\" class=\"depth\">\n          <!-- Generate each of the visible squares at a given zoom level (the current selected node) -->\n          <g \n            class=\"children\" \n            v-for=\"(children, index) in selectedNode._children\" \n            :key=\"'c_' + children.id\" \n            v-if=\"selectedNode\"\n            >\n\n            <!-- Generate the children squares (only visible on hover of a square) -->\n            <rect \n              v-for=\"child in children._children\" \n              class=\"child\" \n              :id=\"child.id\" \n              :key=\"child.id\" \n              :height=\"y(child.y1) - y(child.y0)\" \n              :width=\"x(child.x1) - x(child.x0)\" \n              :x=\"x(child.x0)\" \n              :y=\"y(child.y0)\"\n              >\n            </rect>\n\n            <!-- \n              The visible square rect element.\n              You can attribute directly an event, that fires a method that changes the current node,\n              restructuring the data tree, that reactivly gets reflected in the template.\n            -->\n            <rect \n              class=\"parent\" \n              v-on:click=\"selectNode\" \n              :id=\"children.id\" \n              :key=\"children.id\" \n              :x=\"x(children.x0)\" \n              :y=\"y(children.y0)\" \n              :width=\"x(children.x1 - children.x0 + children.parent.x0)\" \n              :height=\"y(children.y1 - children.y0 + children.parent.y0)\" \n              :style=\"{ fill: color(index) }\"\n              >\n              \n              <!-- The title attribute -->\n              <title>{{ children.data.name }} | {{ children.value }}</title>\n            </rect>\n\n            <!-- The visible square text element with the title and value of the child node -->\n            <text \n              dy=\"1em\" \n              :key=\"'t_' + children.id\" \n              :x=\"x(children.x0) + 6\" \n              :y=\"y(children.y0) + 6\" \n              style=\"fill-opacity: 1;\"\n              >\n              {{ children.data.name }}\n            </text>\n            \n            <text \n              dy=\"2.25em\" \n              :key=\"'t_' + children.id\" \n              :x=\"x(children.x0) + 6\" \n              :y=\"y(children.y0) + 6\" \n              style=\"fill-opacity: 1;\"\n              >\n\n              {{ children.value }}\n            </text>\n\n          </g>\n        </transition-group>\n\n        <!-- The top most element, representing the previous node -->\n        <g class=\"grandparent\">\n          \n          <rect \n            :height=\"margin.top\" \n            :width=\"width\" \n            :y=\"(margin.top * -1)\" \n            v-on:click=\"selectNode\" \n            :id=\"parentId\">\n          </rect>\n\n          <!-- The visible square text element with the id (basically a breadcumb, if you will) -->\n          <text \n            dy=\".65em\" \n            x=\"6\" \n            y=\"-14\">\n            \n            {{ selectedNode.id }}\n          </text>\n        </g>\n      </g>\n    </svg>\n  </div>\n</template>\n\n<script>\nimport {scaleLinear, scaleOrdinal, schemeCategory20} from 'd3-scale'\nimport {json} from 'd3-request'\nimport {hierarchy, treemap} from 'd3-hierarchy'\n\n// To be explicit about which methods are from D3 let's wrap them around an object\n// Is there a better way to do this?\nlet d3 = {\n  scaleLinear: scaleLinear,\n  scaleOrdinal: scaleOrdinal,\n  schemeCategory20: schemeCategory20,\n  json: json,\n  hierarchy: hierarchy,\n  treemap: treemap\n}\n\nexport default {\n  name: 'Treemap',\n  // the component's data\n  data () {\n    return {\n      jsonData: null,\n      rootNode: {},\n      margin: {\n        top: 20,\n        right: 0,\n        bottom: 0,\n        left: 0\n      },\n      width: 960,\n      height: 530,\n      selected: null,\n      color: {}\n    }\n  },\n  // You can do whatever when the selected node changes\n  watch: {\n    selectedNode (newData, oldData) {\n      console.log('The selected node changed...')\n    }\n  },\n  // In the beginning...\n  mounted () {\n    var that = this\n\n    // An array with colors (can probably be replaced by a vuejs method)\n    that.color = d3.scaleOrdinal(d3.schemeCategory20)\n\n    // loads the data and calls the initialization methods\n    d3.json('../static/naf.json',\n      function (error, data) {\n        if (error) console.log(error)\n        that.jsonData = data\n        that.initialize()\n        that.accumulate(that.rootNode, that)\n        that.treemap(that.rootNode)\n      }\n    )\n  },\n  // The reactive computed variables that fire rerenders\n  computed: {\n    // The grandparent id\n    parentId () {\n      if (this.selectedNode.parent === undefined || this.selectedNode.parent === null) {\n        return this.selectedNode.id\n      } else {\n        return this.selectedNode.parent.id\n      }\n    },\n    // Returns the x position within the current domain\n    // Maybe it can be replaced by a vuejs method\n    x () {\n      return d3.scaleLinear()\n        .domain([0, this.width])\n        .range([0, this.width])\n    },\n    // Returns the y position within the current domain\n    // Maybe it can be replaced by a vuejs method\n    y () {\n      return d3.scaleLinear()\n        .domain([0, this.height - this.margin.top - this.margin.bottom])\n        .range([0, this.height - this.margin.top - this.margin.bottom])\n    },\n    // The D3 function that recursively subdivides an area into rectangles\n    treemap () {\n      return d3.treemap()\n      .size([this.width, this.height])\n      .round(false)\n      .paddingInner(0)\n    },\n    // The current selected node\n    selectedNode () {\n      let node = null\n\n      if (this.selected) {\n        let nd = this.getNodeById(this.rootNode, this.selected, this)\n\n        if (nd._children) {\n          node = nd\n        } else {\n          node = nd.parent\n        }\n      } else {\n        node = this.rootNode\n      }\n\n      // Recalculates the y and x domains\n      this.x.domain([node.x0, node.x0 + (node.x1 - node.x0)])\n      this.y.domain([node.y0, node.y0 + (node.y1 - node.y0)])\n\n      return node\n    }\n  },\n  methods: {\n    // Called once, to create the hierarchical data representation\n    initialize () {\n      let that = this\n\n      if (that.jsonData) {\n        that.rootNode = d3.hierarchy(that.jsonData)\n        .eachBefore(function (d) { d.id = (d.parent ? d.parent.id + '.' : '') + d.data.name })\n        .sum((d) => d.value)\n        .sort(function (a, b) {\n          return b.height - a.height || b.value - a.value\n        })\n        that.rootNode.x = that.rootNode.y = 0\n        that.rootNode.x1 = that.width\n        that.rootNode.y1 = that.height\n        that.rootNode.depth = 0\n      }\n    },\n    // Calculates the accumulated value (sum of children values) of a node - its weight,\n    // represented afterwards in the area of its square\n    accumulate (d, context) {\n      d._children = d.children\n\n      if (d._children) {\n        d.value = d._children.reduce(function (p, v) { return p + context.accumulate(v, context) }, 0)\n        return d.value\n      } else {\n        return d.value\n      }\n    },\n    // Helper method - gets a node by its id attribute\n    getNodeById (node, id, context) {\n      if (node.id === id) {\n        return node\n      } else if (node._children) {\n        for (var i = 0; i < node._children.length; i++) {\n          var nd = context.getNodeById(node._children[i], id, context)\n          if (nd) {\n            return nd\n          }\n        }\n      }\n    },\n    // When a user clicks a square, changes the selected data attribute\n    // which fires the computed selectedNode, which in turn finds the Node by the id of the square clicked\n    // and the template reflects the changes\n    selectNode (event) {\n      this.selected = event.target.id\n    }\n  }\n}\n</script>\n\n<style scoped>\n\ntext {\n  pointer-events: none;\n}\n\n.grandparent text {\n  font-weight: bold;\n}\n\nrect {\n  fill: none;\n  stroke: #fff;\n}\n\nrect.parent,\n.grandparent rect {\n  stroke-width: 2px;\n}\n\n.grandparent rect {\n  fill: orange;\n}\n\n.grandparent:hover rect {\n  fill: #ee9700;\n}\n\n.children rect.parent,\n.grandparent rect {\n  cursor: pointer;\n}\n\n.children rect.parent {\n  fill: #bbb;\n  fill-opacity: .5;\n}\n\n.children:hover rect.child {\n  fill: #bbb;\n}\n\n.children text{\n  font-size: 0.8em;\n}\n\n.grandparent text{\n  font-size: 0.9em;\n}\n\n.list-enter-active, .list-leave-active {\n  transition: all 1s;\n}\n.list-enter, .list-leave-to /* .list-leave-active for <2.1.8 */ {\n  opacity: 0;\n}\n    \n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Treemap.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"treemap\"},[_c('svg',{staticStyle:{\"margin-left\":\"0px\"},attrs:{\"height\":_vm.height,\"width\":_vm.width}},[_c('g',{staticStyle:{\"shape-rendering\":\"crispEdges\"},attrs:{\"transform\":\"translate(0,20)\"}},[_c('transition-group',{staticClass:\"depth\",attrs:{\"name\":\"list\",\"tag\":\"g\"}},_vm._l((_vm.selectedNode._children),function(children,index){return (_vm.selectedNode)?_c('g',{key:'c_' + children.id,staticClass:\"children\"},[_vm._l((children._children),function(child){return _c('rect',{key:child.id,staticClass:\"child\",attrs:{\"id\":child.id,\"height\":_vm.y(child.y1) - _vm.y(child.y0),\"width\":_vm.x(child.x1) - _vm.x(child.x0),\"x\":_vm.x(child.x0),\"y\":_vm.y(child.y0)}})}),_vm._v(\" \"),_c('rect',{key:children.id,staticClass:\"parent\",style:({ fill: _vm.color(index) }),attrs:{\"id\":children.id,\"x\":_vm.x(children.x0),\"y\":_vm.y(children.y0),\"width\":_vm.x(children.x1 - children.x0 + children.parent.x0),\"height\":_vm.y(children.y1 - children.y0 + children.parent.y0)},on:{\"click\":_vm.selectNode}},[_c('title',[_vm._v(_vm._s(children.data.name)+\" | \"+_vm._s(children.value))])]),_vm._v(\" \"),_c('text',{key:'t_' + children.id,staticStyle:{\"fill-opacity\":\"1\"},attrs:{\"dy\":\"1em\",\"x\":_vm.x(children.x0) + 6,\"y\":_vm.y(children.y0) + 6}},[_vm._v(\"\\n            \"+_vm._s(children.data.name)+\"\\n          \")]),_vm._v(\" \"),_c('text',{key:'t_' + children.id,staticStyle:{\"fill-opacity\":\"1\"},attrs:{\"dy\":\"2.25em\",\"x\":_vm.x(children.x0) + 6,\"y\":_vm.y(children.y0) + 6}},[_vm._v(\"\\n\\n            \"+_vm._s(children.value)+\"\\n          \")])],2):_vm._e()}),0),_vm._v(\" \"),_c('g',{staticClass:\"grandparent\"},[_c('rect',{attrs:{\"height\":_vm.margin.top,\"width\":_vm.width,\"y\":(_vm.margin.top * -1),\"id\":_vm.parentId},on:{\"click\":_vm.selectNode}}),_vm._v(\" \"),_c('text',{attrs:{\"dy\":\".65em\",\"x\":\"6\",\"y\":\"-14\"}},[_vm._v(\"\\n          \\n          \"+_vm._s(_vm.selectedNode.id)+\"\\n        \")])])],1)])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-7f9468f2\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Treemap.vue\n// module id = null\n// module chunks = ","import Vue from 'vue'\nimport Router from 'vue-router'\nimport Treemap from '@/components/Treemap'\n\nVue.use(Router)\n\nexport default new Router({\n  routes: [\n    {\n      path: '/',\n      name: 'Treemap',\n      component: Treemap\n    }\n  ]\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\nimport router from './router'\n\nVue.config.productionTip = false\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  router,\n  template: '<App/>',\n  components: { App }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}